Práctica II - Visualización de Datos
================

## Carga del documento principal que usaremos para la práctica

``` r
df_0921 <- read.csv("CollegeBasketballPlayers2009-2021.csv")
```

Resumen de los datos que incluye el archivo

``` r
#install.packages("skimr")
library(skimr)
skimr::skim(df_0921)
```

|                                                  |         |
|:-------------------------------------------------|:--------|
| Name                                             | df_0921 |
| Number of rows                                   | 61061   |
| Number of columns                                | 66      |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |         |
| Column type frequency:                           |         |
| character                                        | 8       |
| numeric                                          | 58      |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |         |
| Group variables                                  | None    |

Data summary

**Variable type: character**

| skim_variable | n_missing | complete_rate | min | max | empty | n_unique | whitespace |
|:--------------|----------:|--------------:|----:|----:|------:|---------:|-----------:|
| player_name   |         0 |             1 |   6 |  29 |     0 |    25719 |          0 |
| team          |         0 |             1 |   3 |  22 |     0 |      362 |          0 |
| conf          |         0 |             1 |   2 |   4 |     0 |       36 |          0 |
| yr            |         0 |             1 |   0 |   4 |    40 |       10 |          0 |
| ht            |         0 |             1 |   0 |   6 |    86 |       40 |          0 |
| num           |         1 |             1 |   0 |   5 |  4756 |       45 |          0 |
| type          |         0 |             1 |   3 |   3 |     0 |        1 |          0 |
| X             |         0 |             1 |   0 |  10 |  4684 |        9 |          0 |

**Variable type: numeric**

| skim_variable                   | n_missing | complete_rate |     mean |       sd |       p0 |      p25 |      p50 |      p75 |     p100 | hist  |
|:--------------------------------|----------:|--------------:|---------:|---------:|---------:|---------:|---------:|---------:|---------:|:------|
| GP                              |         0 |          1.00 |    22.80 |    10.17 |     1.00 |    15.00 |    27.00 |    31.00 |    41.00 | ▃▂▃▇▂ |
| Min_per                         |         0 |          1.00 |    37.13 |    28.06 |     0.00 |     9.30 |    35.60 |    62.00 |    98.00 | ▇▅▅▅▂ |
| Ortg                            |         0 |          1.00 |    91.67 |    30.96 |     0.00 |    83.90 |    97.10 |   106.90 |   834.00 | ▇▁▁▁▁ |
| usg                             |         0 |          1.00 |    18.13 |     6.25 |     0.00 |    14.50 |    18.10 |    21.80 |    50.00 | ▁▇▅▁▁ |
| eFG                             |         0 |          1.00 |    44.50 |    18.43 |     0.00 |    40.00 |    47.70 |    53.30 |   150.00 | ▂▇▁▁▁ |
| TS_per                          |         0 |          1.00 |    47.58 |    17.64 |     0.00 |    43.80 |    50.85 |    56.11 |   150.00 | ▁▇▁▁▁ |
| ORB_per                         |         0 |          1.00 |     5.54 |     9.31 |     0.00 |     1.80 |     4.30 |     8.10 |  1576.60 | ▇▁▁▁▁ |
| DRB_per                         |         0 |          1.00 |    12.70 |    10.76 |     0.00 |     8.40 |    11.90 |    16.10 |  1385.00 | ▇▁▁▁▁ |
| AST_per                         |         0 |          1.00 |    10.81 |     9.36 |     0.00 |     4.60 |     9.00 |    15.00 |   100.00 | ▇▁▁▁▁ |
| TO_per                          |         0 |          1.00 |    20.23 |    12.32 |     0.00 |    14.70 |    19.10 |    24.40 |   100.00 | ▇▆▁▁▁ |
| FTM                             |         0 |          1.00 |    31.91 |    36.16 |     0.00 |     4.00 |    19.00 |    48.00 |   312.00 | ▇▂▁▁▁ |
| FTA                             |         0 |          1.00 |    45.66 |    48.63 |     0.00 |     6.00 |    30.00 |    70.00 |   374.00 | ▇▂▁▁▁ |
| FT_per                          |         0 |          1.00 |     0.58 |     0.27 |     0.00 |     0.50 |     0.66 |     0.76 |     1.00 | ▂▁▃▇▂ |
| twoPM                           |         0 |          1.00 |    40.37 |    43.06 |     0.00 |     5.00 |    26.00 |    63.00 |   333.00 | ▇▂▁▁▁ |
| twoPA                           |         0 |          1.00 |    83.05 |    83.83 |     0.00 |    12.00 |    57.00 |   131.00 |   678.00 | ▇▂▁▁▁ |
| twoP_per                        |         0 |          1.00 |     0.43 |     0.20 |     0.00 |     0.37 |     0.46 |     0.53 |     1.00 | ▂▂▇▁▁ |
| TPM                             |         0 |          1.00 |    15.34 |    21.19 |     0.00 |     0.00 |     5.00 |    24.00 |   147.00 | ▇▂▁▁▁ |
| TPA                             |         0 |          1.00 |    44.69 |    57.04 |     0.00 |     1.00 |    18.00 |    73.00 |   394.00 | ▇▂▁▁▁ |
| TP_per                          |         0 |          1.00 |     0.23 |     0.19 |     0.00 |     0.00 |     0.27 |     0.36 |     1.00 | ▆▇▂▁▁ |
| blk_per                         |         0 |          1.00 |     1.87 |     5.70 |     0.00 |     0.00 |     0.80 |     2.40 |  1072.00 | ▇▁▁▁▁ |
| stl_per                         |         0 |          1.00 |     1.71 |     2.13 |     0.00 |     0.90 |     1.50 |     2.20 |   128.30 | ▇▁▁▁▁ |
| ftr                             |         0 |          1.00 |    37.02 |    36.66 |     0.00 |    19.00 |    32.30 |    47.30 |  1000.00 | ▇▁▁▁▁ |
| porpag                          |         0 |          1.00 |     0.77 |     1.33 |    -6.79 |    -0.18 |     0.39 |     1.49 |     8.66 | ▁▁▇▁▁ |
| adjoe                           |         0 |          1.00 |    89.14 |    31.34 |   -39.02 |    79.24 |    94.60 |   106.63 |   678.94 | ▇▃▁▁▁ |
| pfr                             |         0 |          1.00 |     4.22 |     4.51 |     0.00 |     2.70 |     3.70 |     5.20 |   720.00 | ▇▁▁▁▁ |
| year                            |         0 |          1.00 |  2015.06 |     3.75 |  2009.00 |  2012.00 |  2015.00 |  2018.00 |  2021.00 | ▇▅▇▅▇ |
| pid                             |         0 |          1.00 | 33574.48 | 20404.71 |     2.00 | 17054.00 | 32404.00 | 47422.00 | 74254.00 | ▇▇▇▅▅ |
| Rec.Rank                        |     42591 |          0.30 |    53.56 |    27.56 |     0.20 |    30.80 |    55.60 |    77.40 |   100.00 | ▅▆▇▇▇ |
| ast.tov                         |      4727 |          0.92 |     0.94 |     0.70 |     0.00 |     0.46 |     0.83 |     1.27 |    14.01 | ▇▁▁▁▁ |
| rimmade                         |      6329 |          0.90 |    27.38 |    29.65 |     0.00 |     4.00 |    18.00 |    42.00 |   247.00 | ▇▂▁▁▁ |
| rimmade.rimmiss                 |      6329 |          0.90 |    45.93 |    46.83 |     0.00 |     8.00 |    32.00 |    71.00 |   358.00 | ▇▂▁▁▁ |
| midmade                         |      6329 |          0.90 |    14.10 |    17.24 |     0.00 |     1.00 |     8.00 |    21.00 |   222.00 | ▇▁▁▁▁ |
| midmade.midmiss                 |      6329 |          0.90 |    39.30 |    43.61 |     0.00 |     6.00 |    24.00 |    59.00 |   532.00 | ▇▁▁▁▁ |
| rimmade..rimmade.rimmiss.       |     10110 |          0.83 |     0.56 |     0.19 |     0.00 |     0.50 |     0.58 |     0.67 |     1.00 | ▁▂▇▆▁ |
| midmade..midmade.midmiss.       |     10385 |          0.83 |     0.33 |     0.17 |     0.00 |     0.25 |     0.33 |     0.41 |     1.00 | ▂▇▃▁▁ |
| dunksmade                       |      6329 |          0.90 |     3.74 |     7.79 |     0.00 |     0.00 |     0.00 |     4.00 |   122.00 | ▇▁▁▁▁ |
| dunksmiss.dunksmade             |      6329 |          0.90 |     4.21 |     8.54 |     0.00 |     0.00 |     1.00 |     4.00 |   132.00 | ▇▁▁▁▁ |
| dunksmade..dunksmade.dunksmiss. |     33510 |          0.45 |     0.86 |     0.23 |     0.00 |     0.82 |     1.00 |     1.00 |     1.00 | ▁▁▁▂▇ |
| pick                            |     59626 |          0.02 |    33.16 |    16.66 |     1.00 |    19.00 |    34.00 |    48.00 |    60.00 | ▅▆▇▇▇ |
| drtg                            |        45 |          1.00 |   103.27 |    10.08 | -1330.06 |    98.97 |   103.61 |   108.20 |   131.46 | ▁▁▁▁▇ |
| adrtg                           |        45 |          1.00 |   103.42 |    10.96 | -1292.02 |    98.01 |   103.76 |   109.26 |   144.68 | ▁▁▁▁▇ |
| dporpag                         |        45 |          1.00 |     1.44 |     1.06 |    -0.86 |     0.52 |     1.26 |     2.17 |     5.80 | ▅▇▅▂▁ |
| stops                           |        45 |          1.00 |    80.83 |    64.62 |     0.04 |    18.66 |    73.67 |   131.90 |   360.57 | ▇▅▃▁▁ |
| bpm                             |        45 |          1.00 |    -2.54 |     7.59 |  -102.19 |    -5.40 |    -1.82 |     1.41 |   685.31 | ▇▁▁▁▁ |
| obpm                            |        45 |          1.00 |    -1.90 |     5.20 |   -92.59 |    -3.99 |    -1.33 |     1.02 |   162.00 | ▁▇▁▁▁ |
| dbpm                            |        45 |          1.00 |    -0.64 |     4.25 |   -57.46 |    -2.29 |    -0.58 |     1.12 |   523.32 | ▇▁▁▁▁ |
| gbpm                            |        45 |          1.00 |    -2.54 |     8.38 |  -242.52 |    -5.41 |    -1.78 |     1.41 |   269.51 | ▁▁▇▁▁ |
| mp                              |        38 |          1.00 |    16.94 |    10.62 |     0.00 |     7.27 |    16.67 |    26.29 |    50.00 | ▇▆▆▃▁ |
| ogbpm                           |        45 |          1.00 |    -2.09 |     6.24 |  -141.54 |    -4.43 |    -1.58 |     1.00 |   225.49 | ▁▇▁▁▁ |
| dgbpm                           |        45 |          1.00 |    -0.45 |     3.34 |  -100.98 |    -1.74 |    -0.32 |     1.06 |    78.99 | ▁▁▇▁▁ |
| oreb                            |        38 |          1.00 |     0.76 |     0.73 |     0.00 |     0.22 |     0.54 |     1.10 |     5.93 | ▇▂▁▁▁ |
| dreb                            |        38 |          1.00 |     1.90 |     1.48 |     0.00 |     0.70 |     1.64 |     2.77 |    11.55 | ▇▃▁▁▁ |
| treb                            |        38 |          1.00 |     2.66 |     2.10 |     0.00 |     1.00 |     2.26 |     3.83 |    15.00 | ▇▃▁▁▁ |
| ast                             |        38 |          1.00 |     1.07 |     1.17 |     0.00 |     0.22 |     0.68 |     1.53 |    10.00 | ▇▁▁▁▁ |
| stl                             |        38 |          1.00 |     0.53 |     0.47 |     0.00 |     0.16 |     0.42 |     0.79 |     4.00 | ▇▂▁▁▁ |
| blk                             |        38 |          1.00 |     0.28 |     0.41 |     0.00 |     0.00 |     0.13 |     0.36 |     5.26 | ▇▁▁▁▁ |
| pts                             |        38 |          1.00 |     5.77 |     4.95 |     0.00 |     1.57 |     4.48 |     9.06 |    30.09 | ▇▃▂▁▁ |
| X.1                             |        45 |          1.00 |     5.38 |     5.58 |     0.00 |     0.33 |     4.61 |     8.50 |   127.27 | ▇▁▁▁▁ |

## Pivot Tables

Podemos ver en esta tabla, la media de puntos por jugador que sale de
cada conferencia, por año. Hemos visto antes que la media en total es de
*5.7735795* por jugador, lo cual nos permite establecer el baremo:

``` r
library(dplyr) # Para hacer las pivot tables
```

    ## 
    ## Attaching package: 'dplyr'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     filter, lag

    ## The following objects are masked from 'package:base':
    ## 
    ##     intersect, setdiff, setequal, union

``` r
library(tidyr) # Para poder eliminar los NA's
mpts_yr <- df_0921 %>%
  group_by(conf, year) %>% 
  summarize(mean_pts=mean(pts)) %>%
  arrange(desc(mean_pts))
```

    ## `summarise()` has grouped output by 'conf'. You can override using the
    ## `.groups` argument.

``` r
mpts_yr
```

    ## # A tibble: 421 × 3
    ## # Groups:   conf [36]
    ##    conf   year mean_pts
    ##    <chr> <int>    <dbl>
    ##  1 Ind    2015     7.10
    ##  2 BE     2018     6.88
    ##  3 ASun   2017     6.83
    ##  4 Sum    2018     6.73
    ##  5 OVC    2019     6.72
    ##  6 Sum    2019     6.69
    ##  7 CAA    2018     6.68
    ##  8 B12    2018     6.63
    ##  9 MVC    2019     6.58
    ## 10 WAC    2020     6.57
    ## # … with 411 more rows

## Gráficos

``` r
library(ggplot2)
ggplot(mpts_yr, aes(x = year, y = mean_pts)) +
  ggtitle("Media de Puntos por Año + Conferencia") +
  geom_col(fill="steelblue") +
  theme_minimal() +
  facet_wrap(~conf)
```

    ## Warning: Removed 28 rows containing missing values (`position_stack()`).

![](pra2_iortizmuno_files/figure-gfm/unnamed-chunk-4-1.png)<!-- -->
